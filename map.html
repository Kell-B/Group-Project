<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>

    <title>Air Quality Info</title>
</head>
<body>

<table id="display">
    <tr>
        <th>City</th>
        <th>Country</th> <!--Maybe we can use an API to pull country flag icons-->
        <th>Weather</th> <!--combine temperature and icon in the same cell?-->
        <th>AQI</th>
        <th>Status</th> <!--Good, Fair, Bad, Run For Your Life-->
    </tr>
</table>

<br><br>

<form>
    <label>City:</label>
    <input type="text" id="city">
    <label>State/Province:</label>
    <input type="text" id="state">
    <label>Country</label>
    <input type="text" id="country">
    <button type="submit">Submit</button>
    
</form>

<script type="text/javascript">

$("button").on("click", function (event) {
    event.preventDefault();
    var city = $("#city").val();
    var state = $("#state").val();
    var country = $("#country").val();

    var queryURL = "https://api.airvisual.com/v2/city?city=" + city + "&state=" + state + "&country=" + country + "&key=428d055e-12ec-4114-a299-ccbc373d0057";

    $.ajax({
        url: queryURL,
        method: "GET"
    }).then(function(response) {
        var aqi = response.data.current.pollution.aqius;
        var tempC = response.data.current.weather.tp;
        var weather = response.data.current.weather.ic;
        var weatherIcon = $("<img>").attr("src", `https://airvisual.com/images/${weather}.png`);

        var newRow = $("<tr>").append(
            $("<td>").text(city),
            $("<td>").text(country),
            $("<td>").append(tempC, weatherIcon),
            $("<td>").text(aqi)
        );
        $("#display").append(newRow);
        console.log(weatherIcon);
    })
});




    
    
</script>
    
</body>
</html>